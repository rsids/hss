<link rel="import" href="/bower_components/polymer/polymer.html">

<dom-module id="hss-sound-item">
    <template>
        <style include="shared-styles"></style>
        <style>

            .hss-sound-item-holder {
                @apply(--layout-center);
                display: flex;
                width: 120px;
                height: 120px;
                overflow: hidden;
                text-align: center;
                padding: 0 5px;
                min-width:0;
            }

            span {
                font-size: 14px;
                text-align: center;
                display: block;
                margin: auto;
            }

            .hss-paper {
                background: #EF5350;
            }

        </style>

        <paper-material elevation="1" class="hss-paper">
            <div class="hss-sound-item-holder" on-click="onSoundClick">
                <paper-ripple id="soundRipple"></paper-ripple>
                <span>{{soundName}}</span>
            </div>
        </paper-material>
    </template>

    <script>
        'use strict';

        class HssSoundItem {

            attached() {
                this.querySelector('.hss-paper').style.background = this.getColor(this.index);

                addEventListener('hss-play-sound', (e) => {
                    if(e.detail.sound === this.sound[0]) {
                        console.log(e);
                        this.$.soundRipple.simulatedRipple();
                    }
                });
            }

            beforeRegister() {
                this.is = 'hss-sound-item';
                this.properties = {
                    sound: {
                        type: Array,
                        observer: '_soundChanged'
                    },
                    index: {
                        type: Number
                    }
                };

            }

            onSoundClick() {
                this.fire('play', {sound: this.soundLink});
            }

            getColor(idx) {
                const colors = [
                    /*'#EF5350','#EC407A','#AB47BC',
                    '#7E57C2','#5C6BC0','#42A5F5',*/
                    '#29B6F6','#26C6DA','#26A69A',
                    '#66BB6A','#9CCC65','#D4E157',
                    '#FFEE58'/*,'#FFCA28','#FFA726',
                    '#FF7043','#8D6E63'*/
                ];

                return colors[idx % colors.length];
            }

            _soundChanged(value) {
                this.soundLink = value[0];
                this.soundName = value[1];
            }
        }
        Polymer(HssSoundItem);
    </script>

</dom-module>